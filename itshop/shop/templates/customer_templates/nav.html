{% load static %}
<nav class="flex items-center justify-between w-full fixed z-20 top-0 start-0 bg-white shadow-sm py-3 px-6">
  <div
    class="text-3xl font-bold bg-gradient-to-bl from-purple-300 to-purple-900 bg-clip-text text-transparent hover:from-purple-900 hover:to-purple-500 transition duration-300">
    <a href="{% url 'customer_home' %}">ITShop</a>
  </div>

  <div class="w-1/3">
    <div class="flex items-center">
      <input type="text" placeholder="ค้นหาสินค้า...">
      <a href="">
        <button class="ml-2 bg-purple-500 text-white rounded-md px-3 py-2 hover:bg-purple-600 hover:cursor-pointer ">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </a>
    </div>
  </div>

  <div class="flex items-center gap-6">
    {% if user.is_authenticated and perms.shop.change_cartitem and perms.shop.change_customer%}
    <a href="">
      <button class="text-xl text-gray-400 hover:cursor-pointer hover:text-purple-600">
        <i class="fa-solid fa-heart"></i>
      </button>
    </a>

    <a href="">
      <button class="text-xl text-gray-400 hover:cursor-pointer hover:text-purple-600">
        <i class="fa-solid fa-cart-shopping"></i>
      </button>
    </a>

    <div class="relative">
      <button onclick="toggleDropdown()" class="flex items-center justify-center">
        {% if user.customer.image %}
        <img src="{{user.customer.image.url}}" alt="Profile" class="w-7 h-7 rounded-full object-cover border border-gray-300 hover:cursor-pointer hover:border-purple-600">
        {% else %}
        <img src="{% static 'img/user_default_img.png' %}" alt="Profile" class="w-7 h-7 rounded-full object-cover border border-gray-300 hover:cursor-pointer hover:border-purple-600">
        {% endif %}
      </button>

      <div id="dropdownMenu"
        class="hidden absolute right-0 mt-1 w-40 bg-white border border-gray-200 rounded-md shadow-md">
        <a href="{% url 'profile'%}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 mt-2">ข้อมูลโปรไฟล์</a>
        <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 mb-2">คำสั่งซื้อ</a>
        <hr class="text-gray-200 my-2">
        <a href="{% url 'logout'%}" class="block px-4 py-2 text-red-500 hover:bg-gray-100 my-2">ออกจากระบบ</a>
      </div>
    </div>

    {% else %}
    <a href="{% url 'login' %}" class="text-gray-800 hover:cursor-pointer hover:text-purple-600">
      เข้าสู่ระบบ
    </a>
    <a href="{% url 'register' %}">
      <button class="text-white bg-purple-500 rounded-md hover:cursor-pointer hover:bg-purple-600 px-2 py-1">
        สมัครสมาชิก
      </button>
    </a>
    {% endif %}
  </div>
</nav>

<script>
  const dropdownMenu = document.getElementById('dropdownMenu');
  function toggleDropdown() {
    dropdownMenu.classList.toggle('hidden');
  }
</script>